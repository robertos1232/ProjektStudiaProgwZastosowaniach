{% extends 'base.html' %}
{% block title %}
    <title>
        {% if ann %}
            Edytuj ogłoszenie
        {% else %}
            Dodaj ogłoszenie
        {% endif %}
    </title>
{% endblock %}

{% block content %}
    <div class="alert alert-warning" id="alert" role="alert"  {% if not warning %} hidden="hidden" {% endif %}>
        {{ warning }}
    </div>
    <form
            {% if ann %}
                action="edit"
            {% else %}
                action="/add/"
            {% endif %}
                method="POST"
                enctype="multipart/form-data"
    >
        <div class="grid">
            {% csrf_token %}
            <div class="form-group pt-2">
                <label for="typeOfAnn">Typ</label>
                <select class="form-control" id="typeOfAnn" name="typeOfAnn" required>
                    {% for ann_type, description in ann_types.items %}
                        <option value="{{ ann_type }}" {% if ann.type == ann_type %}selected{% endif %}>
                            {{ description }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group pt-2">
                <label for="typeOfStatus">Status</label>
                <select class="form-control" id="typeOfStatus" name="typeOfStatus" required>
                    {% for status_type, description in statutes.items %}
                        <option value="{{ status_type }}" {% if ann.status == status_type %}selected{% endif %}>{{ description }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group pt-2">
                <label for="typeOfHeating">Typ ogrzewania</label>
                <select class="form-control" id="typeOfHeating" name="typeOfHeating" required>
                    {% for heating_type, description in heating_types.items %}
                        <option value="{{ heating_type }}" {% if ann.heating_types == heating_type %}selected{% endif %}>{{ description }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group pt-2">
                <label for="price">Cena</label>
                <input type="number" class="form-control" min=0 id="price" name="price" required {% if ann %} value="{{ ann.price }}" {% endif %}>
            </div>
            <div class="form-group pt-2">
                <label for="buildYear">Rok budowy</label>
                <input type="number" class="form-control" min=1850 id="buildYear" name="buildYear" value=2023 required {% if ann %} value="{{ ann.build_year }}" {% endif %}>
            </div>
            <div class="form-group pt-2">
                <label for="area">Powierzchnia</label>
                <input type="number" class="form-control" min="0" id="area" name="area" required {% if ann %} value="{{ ann.area }}" {% endif %}>
            </div>
            <div class="form-group pt-2">
                <label for="city">Miasto</label>
                <input type="text" class="form-control" id="city" name="city" required {% if ann %} value="{{ ann.address_city }}" {% endif %}>
            </div>
            <div class="form-group pt-2">
                <label for="street">Ulica</label>
                <input type="text" class="form-control" id="street" name="street" required {% if ann %} value="{{ ann.address_street }}" {% endif %}>
            </div>
            <div class="form-group pt-2">
                <label for="addressNumber">Numer domu/mieszkania</label>
                <input type="text" class="form-control" id="addressNumber" name="addressNumber" required {% if ann %} value="{{ ann.address_number }}" {% endif %}>
            </div>
            <div class="form-group pt-2">
                <label for="postCode">Kod pocztowy</label>
                <input type="text" pattern="[0-9]{2}-[0-9]{3}" class="form-control" id="postCode" name="postCode" {% if ann %} value="{{ ann.address_post_code }}" {% endif %}>
            </div>
            <div class="form-group pt-2">
                <label for="roomsNumber">Ilość pokoi</label>
                <input type="text" class="form-control" id="roomsNumber" name="roomsNumber" {% if ann %} value="{{ ann.number_of_rooms }}" {% endif %}>
            </div>
            <div class="form-group pt-2">
                <label for="photo">Zdjęcie</label>
                <input type="file" id="photo" style="border: none;" placeholder="Dodanie zdjęcia" name="photo" {% if not ann %} required {% endif %}>
            </div>
        </div>
        <div class="grid-form">
            <div class="form-group pt-2">
                <label for="description">Opis</label>
                <textarea class="form-control" id="description" name="description" rows="3" required >{% if ann %} {{ ann.description }} {% endif %}</textarea>
            </div>
            <div class="form-group pt-2">
                <button type="submit" class="btn btn-primary">{% if ann %} Edytuj {% else %} Dodaj {% endif %} ogłoszenie</button>
            </div>
        </div>
    </form>
{% endblock %}